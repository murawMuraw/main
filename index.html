<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–ö–∞—Ä—Ç–∞ —Å —Ä–∞–¥–∏—É—Å–æ–º 15 –∫–º (–Ø–Ω–¥–µ–∫—Å)</title>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
  <style>
    html, body, #map {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #windInfo {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px;
      border-radius: 8px;
      font-family: sans-serif;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div id="windInfo">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Ç—Ä–∞...</div>
  <div id="map"></div>

  <script>
    let windDiv = document.getElementById("windInfo");
    const apiKey = "080b3dab3f26f4e8d44b5d87f4c3ee78"; // üîÅ –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–ô –ö–õ–Æ–ß OpenWeatherMap

    function updateWindData(lat, lon) {
      fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}&lang=ru`)
        .then(response => response.json())
        .then(data => {
          if (data.wind) {
            const speed = data.wind.speed;
            const deg = data.wind.deg;
            const dir = getWindDirection(deg);
            windDiv.innerHTML = `üå¨ –í–µ—Ç–µ—Ä: ${speed} –º/—Å, ${dir} (${deg}¬∞)`;
          } else {
            windDiv.innerHTML = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—Ç—Ä–µ";
          }
        })
        .catch(err => {
          windDiv.innerHTML = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ç—Ä–∞";
          console.error(err);
        });
    }

    function getWindDirection(deg) {
      const dirs = ['—Å–µ–≤–µ—Ä–Ω—ã–π', '—Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π', '–≤–æ—Å—Ç–æ—á–Ω—ã–π', '—é–≥–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π', '—é–∂–Ω—ã–π', '—é–≥–æ-–∑–∞–ø–∞–¥–Ω—ã–π', '–∑–∞–ø–∞–¥–Ω—ã–π', '—Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–Ω—ã–π'];
      const index = Math.round(deg / 45) % 8;
      return dirs[index];
    }

    ymaps.ready(function () {
      const center = [51.5, 0.0]; // –ì—Ä–∏–Ω–≤–∏—á
      const map = new ymaps.Map("map", {
        center: center,
        zoom: 8
      });

      let circle;

      map.events.add('click', function (e) {
        const coords = e.get('coords');

        if (circle) {
          map.geoObjects.remove(circle);
        }

        circle = new ymaps.Circle([
          coords,
          15000 // —Ä–∞–¥–∏—É—Å 15 –∫–º
        ], {}, {
          fillColor: "#87CEEB",
          fillOpacity: 0.1,
          strokeColor: "#87CEEB",
          strokeOpacity: 0.6,
          strokeWidth: 2
        });

        map.geoObjects.add(circle);
        map.setCenter(coords);

        updateWindData(coords[0], coords[1]);
      });

      // –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Ç—Ä–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É –∫–∞—Ä—Ç—ã
      updateWindData(center[0], center[1]);

      // –æ–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ç–µ—Ä –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
      setInterval(() => {
        const currentCenter = map.getCenter();
        updateWindData(currentCenter[0], currentCenter[1]);
      }, 60000);
    });
  </script>
</body>
</html>











